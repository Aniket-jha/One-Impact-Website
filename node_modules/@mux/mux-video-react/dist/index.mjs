import{useEffect as V,useRef as v}from"react";var d=(...r)=>{let o=v(null);return V(()=>{r.forEach(n=>{!n||(typeof n=="function"?n(o.current):n.current=o.current)})},[r]),o};import m,{useEffect as i,useRef as T,useState as R}from"react";import e from"prop-types";import{allMediaTypes as L,initialize as j,StreamTypes as w,PlaybackTypes as H,toMuxVideoURL as M,generatePlayerInitTime as I}from"@mux/playback-core";var k=()=>{try{return"0.7.0"}catch{}return"UNKNOWN"},S=k(),b=()=>S;var N=b(),h="mux-video-react",P=m.forwardRef((r,o)=>{var y;let{envKey:n,debug:A,beaconCollectionDomain:D,playbackId:s,preferPlayback:K,type:U,streamType:W,startTime:_,src:c,children:x,autoPlay:l,preload:p,...g}=r,[C]=R(I()),[f,E]=R((y=M(s))!=null?y:c),a=T(void 0),O=T(null),u=d(O,o);return i(()=>{var t;E((t=M(s))!=null?t:c)},[c,s]),i(()=>{let t={...r,src:f,playerInitTime:C,playerSoftwareName:h,playerSoftwareVersion:N,autoplay:l};a.current=j(t,u.current,a.current)},[f]),i(()=>{var t;(t=a.current)==null||t.setAutoplay(l)},[l]),i(()=>{var t;(t=a.current)==null||t.setPreload(p)},[p]),m.createElement("video",{ref:u,...g},x)});P.propTypes={envKey:e.string,debug:e.bool,disableCookies:e.bool,metadata:e.any,beaconCollectionDomain:e.string,playbackId:e.string,playerInitTime:e.number,preferPlayback:e.oneOf(Object.values(H)),type:e.oneOf(L),streamType:e.oneOf(Object.values(w)),startTime:e.number};var $=P;export{$ as default};
//# sourceMappingURL=index.mjs.map
